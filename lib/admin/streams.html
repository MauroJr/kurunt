<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="user-scalable=yes" /> 
  <title>Kurunt - Streams</title>

  <script src="jquery.min.js"></script>

  <link href="style.css" media="all" rel="stylesheet" type="text/css" />
  <style type="text/css">
 
table{
	border-collapse: collapse;
	margin: 0px 0 0 0;
	color: #000;
 	width: 100%;
	border-top: 1px solid #000;
	border-spacing: 1px;
}

table th {
	height: 20px;
	font-size: 12px;
	padding: 7px 11px 7px 11px;
	border: 1px solid #505258;
	color: #fff;
	background: #252829;
}

table tbody {  }

table td {
	font-size: 11px; 
	padding: 7px 11px 7px 11px;
	border: 1px solid #abadb3;
	color: #313131;
	white-space: nowrap; 
	overflow: hidden; 
	text-overflow:ellipsis;
}

table .row_num_th {
	width: 15px;
	border: 1px solid #abadb3;
	background: #637383;
	color: #fff;
	text-align: center;        
}
table .row_num {
	border: 1px solid #abadb3;
 	color: #fff;
	background: #39424b;
	text-align: center;
}
table .row_del_th {
	color: #fff;
	text-align: center;        
	width: 30px;
}
table .row_edit_th {
	color: #fff;
	text-align: center;        
	width: 30px;
}
table .row_api_th {
	color: #fff;
	text-align: center;        
	width: 30px;
}

table tr:hover td {
	background: #fdf2f2;
}
table .alternate_open {
	background: #e9fecb;
}
table .alternate_closed {
	background: url(/images/bg_grey.gif) top repeat;
}
table .td_address {
	width: 35%;
}
table .td_status {
	text-align: center;
}
 
  </style>
</head>

<body>

  <div id="headermenu">
    <div class="wrapper">
      <div id="logo"><img src="/images/logo.png" alt="" /></div>
      <div id="navs">
        <a href="streams.html">Streams</a>
        <a id="report-address" href="<kurunt-report-address>">Report</a>  
      </div>
    </div>
  </div>

  <div class="wrapper white" id="contents">


    <h1>Streams</h1>

  
    <script>

      // set header colour:
      var header_colours = ['#DE45B3','#FF6640','#5C56F0','#0C9688','#3B5998','#D8272D','#1352A2','#442D65','#007034','#FE9601'];
      $('#headermenu').css('background', header_colours[Math.floor(Math.random()*header_colours.length)]);


      var reports_address = '<kurunt-report-address>';
      console.log('reports_address: ' + reports_address);
      
      
      // another tag
      
      var version = <kurunt-version>;
      console.log('version: ' +version);
      
 
 
      
      var streams = JSON.parse(<kurunt-streams>);
     	//console.log('streams: ' + streams['streams'][1]['apikey']);
			var i = 1;
			var alternate = '';
			
			jQuery(function($){       
			 	$.each(streams['streams'], function(key, val) {
					console.log('<tr id="stream_' + key + '">' + val['apikey'] + ' worker: ' + val['worker'] + '</tr>');
					
					
					if ( i%2 != 1 ) {
						alternate = 'alternate';
					}
					if ( val['status'] === 'closed' ) {
						alternate = 'alternate_closed';
					} else {
						alternate = 'alternate_open';
					}
				
					$('<tr><td class="row_num">' + i + '</td><td class="'+alternate+'">' + val['apikey'] + '</td><td class="'+alternate+'">' + val['input']['object'] + '</td><td class="'+alternate+'">' + val['worker'] + '</td><td class="'+alternate+'">stream, mongo</td><td class="'+alternate+'">test</td><td class="'+alternate+'"><a href="#">stream</a></td><td class="'+alternate+'"><a href="#">tcp://127.0.0.1:5555</a></td><td class="'+alternate+' row_api_th"><a href="#"><img src="/images/api_icon.gif" alt="api" title="api" /></a></td><td class="'+alternate+'"><a href="#">' + val['status'] + '</a></td><td class="'+alternate+' row_edit_th"><img onclick="editStream('+ val['apikey'] +')" src="/images/edit_icon.gif" alt="edit" title="edit" /></td><td class="'+alternate+' row_del_th"><img onclick="deleteStream('+ val['apikey'] +')" src="/images/delete_icon.gif" alt="delete" title="delete" /></td></tr>').appendTo("#streams_table tbody");
					i++;
				});
      });
      
    </script>




    <div class="pagespan container">
      <div class="wrap">
  
  			<div id="streams_table">
  				<table>
  					<thead>
  						<tr>
  							<th class="row_num_th">-</th>
  							<th>apikey</th>
  							<th>Input</th>
  							<th>Worker</th>
  							<th>Stores</th>
  							<th>Tags</th>
  							<th>Reports</th>
  							<th>Input Address</th>
  							<th>API</th>  							
  							<th>Status</th>
  							<th class="row_edit_th">-</th>
  							<th class="row_del_th">-</th>
              </tr>
            </thead>
            <tbody>

          	</tbody>
      		</table>
      	</div>
      
      <br/>
      <a href="/new-stream.html">New Stream</a>
      
      </div>
    </div>

  </div>

  <div id="footer">
      <div class="wrapper">
        <p> 
          <a href="http://kurunt.com">Kurunt</a>
          <span class="seperator"> |</span>
          <a href="http://kurunt.com/support/">Support</a>
          <span class="seperator"> |</span> 
          <a href="https://github.com/kurunt">GitHub</a>
          <span class="seperator"> |</span>
          <a href="http://kurunt.com/license/">License</a>
        </p>  
        <p class="copyright">
          &copy; Copyright Kurunt 2013. Except where otherwise <a href="http://kurunt.com/license/">noted</a>, content on this site is licensed under a <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>.
        </p>
      </div>
    </div>

</body>
</html>
